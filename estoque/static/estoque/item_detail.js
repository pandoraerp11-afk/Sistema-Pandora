// item_detail.js - ações para detalhe de item de estoque
function adicionarMovimento(tipo, contexto){
  if(!window.Swal){ alert('SweetAlert2 não carregado'); return; }
  const nomeItem=contexto.nome; const quantidadeAtual=contexto.quantidade;
  Swal.fire({title:`${tipo==='entrada'?'Entrada':'Saída'} de Estoque`,html:`<div class='text-start'><p><strong>Item:</strong> ${nomeItem}</p><p><strong>Estoque Atual:</strong> ${quantidadeAtual}</p><div class='form-floating mt-3'><input type='number' id='quantidade' class='form-control' min='1' step='1' placeholder='Quantidade'><label for='quantidade'>Quantidade</label></div><div class='form-floating mt-3'><textarea id='observacao' class='form-control' placeholder='Observação' style='height:80px'></textarea><label for='observacao'>Observação (opcional)</label></div></div>`,showCancelButton:true,confirmButtonText:`Confirmar ${tipo==='entrada'?'Entrada':'Saída'}`,cancelButtonText:'Cancelar',confirmButtonColor:tipo==='entrada'?'#28a745':'#dc3545',preConfirm:()=>{const q=document.getElementById('quantidade').value;const obs=document.getElementById('observacao').value;if(!q||q<=0){Swal.showValidationMessage('Quantidade inválida');return false;}if(tipo==='saida'&&q>quantidadeAtual){Swal.showValidationMessage('Saída maior que estoque');return false;}return {quantidade:q,observacao:obs};}}).then(r=>{if(r.isConfirmed){Swal.fire({title:'Movimento (mock) registrado',icon:'success'}).then(()=>location.reload());}})
}
