{% extends "pandora_confirm_delete_ultra_modern.html" %}
{% load static %}

{% block title %}Excluir Item de Estoque{% endblock %}
{% block page_title %}Excluir Item{% endblock %}
{% block page_subtitle %}Confirmação irreversível{% endblock %}
{% block page_icon %}fas fa-trash-alt text-danger{% endblock %}

{% block breadcrumbs %}
<li class="breadcrumb-item"><a href="{% url 'estoque:estoque_home' %}">Estoque</a></li>
<li class="breadcrumb-item active">Excluir</li>
{% endblock %}

{% block delete_icon %}<i class="fas fa-exclamation-triangle"></i>{% endblock %}
{% block delete_title %}Confirmar Exclusão{% endblock %}
{% block delete_subtitle %}Remover item {{ item.nome_item }} do estoque{% endblock %}

{% block extra_css %}
<style>
    .info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem;margin-top:.5rem}
    .info-item{background:#f1f3f5;padding:.55rem .7rem;border-radius:8px;font-size:.7rem;line-height:1.1}
    .info-label{display:block;font-size:.55rem;text-transform:uppercase;letter-spacing:.5px;font-weight:600;color:#6c757d;margin-bottom:2px}
    .info-value{font-weight:600;color:#212529;font-size:.8rem}
    .warning-card{background:#fff5f5;border:1px solid #f8d7da;border-left:4px solid #dc3545;padding:.9rem 1rem;border-radius:10px;font-size:.75rem;margin-bottom:1rem}
    .warning-card ul{margin:0 0 .25rem 1.1rem;padding:0}
    .warning-card li{margin-bottom:.35rem}
</style>
{% endblock %}

{% block delete_object_info %}
<div class="mb-3">
    <h6 class="fw-bold mb-2"><i class="fas fa-box me-2 text-danger"></i>Dados do Item</h6>
    <div class="info-grid">
        <div class="info-item"><span class="info-label">Nome</span><span class="info-value">{{ item.nome_item }}</span></div>
        <div class="info-item"><span class="info-label">Quantidade</span><span class="info-value">{{ item.quantidade }}</span></div>
        <div class="info-item"><span class="info-label">Unidade</span><span class="info-value">{{ item.unidade_medida.nome|default:"N/D" }}</span></div>
        <div class="info-item"><span class="info-label">Localização</span><span class="info-value">{{ item.localizacao|default:"N/D" }}</span></div>
        {% if item.valor_unitario %}
        <div class="info-item"><span class="info-label">Vlr. Unitário</span><span class="info-value">R$ {{ item.valor_unitario|floatformat:2 }}</span></div>
        <div class="info-item"><span class="info-label">Vlr. Total</span><span class="info-value">R$ {% widthratio item.quantidade 1 item.valor_unitario|floatformat:2 %}</span></div>
        {% endif %}
    </div>
</div>
<div class="warning-card">
    <strong class="d-block mb-1 text-danger"><i class="fas fa-exclamation-circle me-1"></i>Avisos</strong>
    <ul class="mb-1">
        <li>A exclusão é definitiva.</li>
        <li>Movimentos históricos podem perder referência.</li>
        <li>Não é possível desfazer depois.</li>
    </ul>
</div>
{% endblock %}

{% block delete_form %}
<form method="post" class="d-flex flex-wrap gap-2 align-items-center">
    {% csrf_token %}
    <p class="mb-2 w-100 small">Confirme a exclusão do item <strong>{{ item.nome_item }}</strong>.</p>
    <button type="submit" class="btn btn-danger"><i class="fas fa-trash me-1"></i> Excluir</button>
    <a href="{% url 'estoque:estoque_home' %}" class="btn btn-outline-secondary"><i class="fas fa-times me-1"></i> Cancelar</a>
</form>
{% endblock %}

{% block extra_js %}<script>console.log('Tela de exclusão estoque modernizada');</script>{% endblock %}
