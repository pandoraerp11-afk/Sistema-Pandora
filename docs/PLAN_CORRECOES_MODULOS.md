# Plano de Correções – Fase "Ajustar Todos os Erros"\n\nObjetivo: Reduzir gradualmente erros/avisos (mypy, pyright, Ruff) e consolidar módulo Clientes antes da auditoria completa do Portal Cliente.\n\n## 1. Escopo das Ferramentas\n- Ruff: qualidade e formatação (E,F,B,I,UP,SIM,PL) – já limpo em grande parte no app `clientes`.\n- mypy: estava travando por diretório de backup duplicado. Ajuste de exclusão aplicado.\n- Pyright: muitos falsos positivos em atributos Django quando modo básico. Ajustar apenas casos críticos.\n\n## 2. Prioridades Imediatas\n1. Excluir diretório de backup das análises (feito).\n2. Regerar relatórios de mypy/Ruff após exclusão para confirmar redução de ruído.\n3. Corrigir import ordering remanescente em `clientes/models.py` ou aplicar ignore localizado.\n4. Verificar se há warnings de uso de atributos inexistentes em modelos recém-refatorados.\n5. Garantir que wizard de cliente conclui fluxo end-to-end manualmente (já passou testes automatizados).\n\n## 3. Estratégia de Redução de Erros\n- Classificar erros restantes em: LEGADO (tolerado), FALSO POSITIVO, REAL.\n- Atacar primeiro erros REAL em apps centrais: `clientes`, `documentos`, `core`.\n- Para cada ajuste: adicionar teste rápido (quando viável) ou justificar no código via comentário.\n\n## 4. Próximas Ações (Check-list)\n- [ ] Rodar mypy novamente (confirmar remoção de módulo duplicado).\n- [ ] Rodar Ruff full (garantir import ordering limpo).\n- [ ] Ajustar bloco de imports em `clientes/models.py` (ou inserir `# ruff: noqa: I001` se estilo conflitar com heurística).\n- [ ] Levantar erros pyright realmente relevantes no módulo clientes (filtrar somente linhas do app).\n- [ ] Preparar auditoria Portal Cliente (inventário + gaps vs. Fase 2 planejada).\n\n## 5. Critérios de Conclusão desta Fase\n- Testes continuam verdes.\n- Mypy sem erros bloqueadores (0 ou apenas ignorados de legado documentado).\n- Ruff sem novos avisos em apps ajustados.\n- Documento de auditoria do Portal pronto para próxima fase.\n\n## 6. Notas\n- Não faremos ainda migração para remover null=True em campos string (demanda planejamento de dados).\n- Modelo `DocumentoCliente` será removido após confirmação de que nenhuma view/service acessa mais.\n\n--\nAtualizado automaticamente por assistente em fase de saneamento.\n