{% load static %}
<table class="table table-sm align-middle" id="proposta-itens-table">
  <thead>
    <tr>
      <th>#</th>
      <th>Descrição</th>
      <th>Qtd</th>
      <th>Un</th>
      <th>Preço Unitário</th>
      <th>Prazo (dias)</th>
      <th>Total Item</th>
      <th>Disponibilidade</th>
      <th>Obs</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for item in itens %}
    {% with pi=mapa_proposta_itens.item.id %}{% endwith %}
    {% include 'cotacoes/portal_fornecedor/fragments/proposta_item_row.html' with item=item pi=mapa_proposta_itens[item.id] proposal=proposta %}
  {% empty %}
    <tr><td colspan="10" class="text-center text-muted">Nenhum item encontrado.</td></tr>
  {% endfor %}
  </tbody>
</table>
<script>
// Pequeno helper para auto-submit HTMX inputs com debounce
window._debouncers = window._debouncers || {};
function debounceHtmx(el){
  const key = el.name+el.dataset.item;
  clearTimeout(window._debouncers[key]);
  window._debouncers[key] = setTimeout(()=>{ el.closest('form').dispatchEvent(new Event('submit',{bubbles:true})); }, 400);
}
</script>
