{% extends "pandora_home_ultra_modern.html" %}
{% load static %}
{% load i18n %}

{% block home_icon %}<i class="fas fa-building-columns me-2 text-primary"></i>{% endblock %}
{% block home_title %}Configurações da Empresa{% endblock %}
{% block home_subtitle %}Configurações e personalizações específicas de {{ current_tenant.name }}{% endblock %}

{% block home_stats %}
<div class="row mb-4" data-aos="fade-up" data-aos-delay="100">
    <div class="col-12">
        <h2 class="section-title">
            <i class="fas fa-info-circle me-2"></i>
            Informações da Empresa
        </h2>
    </div>
</div>

<div class="row mb-4" data-aos="fade-up" data-aos-delay="200">
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card primary h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-primary bg-opacity-10 text-primary mx-auto">
                    <i class="fas fa-building"></i>
                </div>
                <h6 class="fw-bold mb-1 small">{{ tenant_configs.company_name }}</h6>
                <p class="text-muted mb-0 small">Nome da Empresa</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card info h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-info bg-opacity-10 text-info mx-auto">
                    <i class="fas fa-id-card"></i>
                </div>
                <h6 class="fw-bold mb-1 small">{{ tenant_configs.company_type }}</h6>
                <p class="text-muted mb-0 small">Tipo de Pessoa</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card success h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-success bg-opacity-10 text-success mx-auto">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h6 class="fw-bold mb-1 small text-capitalize">{{ tenant_configs.status }}</h6>
                <p class="text-muted mb-0 small">Status</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card warning h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-warning bg-opacity-10 text-warning mx-auto">
                    <i class="fas fa-calendar"></i>
                </div>
                <h6 class="fw-bold mb-1 small">{{ tenant_configs.created_at|date:"d/m/Y" }}</h6>
                <p class="text-muted mb-0 small">Data de Cadastro</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block home_actions %}
<div class="row mb-4" data-aos="fade-up" data-aos-delay="300">
    <div class="col-12">
        <h2 class="section-title">
            <i class="fas fa-cogs me-2"></i>
            Configurações da Empresa
        </h2>
    </div>
</div>

<div class="row mb-4" data-aos="fade-up" data-aos-delay="400">
    <!-- Dados Empresariais -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-building me-2"></i>
                    Dados Empresariais
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Razão Social</strong>
                    <br><small class="text-muted">{{ tenant_configs.company_name }}</small>
                </div>
                
                <div class="mb-3">
                    <strong>CNPJ/CPF</strong>
                    <br><small class="text-muted">{{ tenant_configs.cnpj_cpf|default:"Não informado" }}</small>
                </div>
                
                <div class="mb-3">
                    <strong>Tipo de Pessoa</strong>
                    <br><small class="text-muted">{{ tenant_configs.company_type }}</small>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Status</strong>
                        <br><small class="text-muted">Situação da empresa</small>
                    </div>
                    <span class="badge bg-{{ tenant_configs.status|yesno:'success,warning' }}">
                        {{ tenant_configs.status|capfirst }}
                    </span>
                </div>
            </div>
            <div class="card-footer bg-light">
                <button class="btn btn-outline-primary btn-sm">
                    <i class="fas fa-edit me-1"></i>
                    Editar Dados
                </button>
            </div>
        </div>
    </div>
    
    <!-- Módulos Habilitados -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="fas fa-puzzle-piece me-2"></i>
                    Módulos Habilitados
                </h5>
            </div>
            <div class="card-body">
                {% if tenant_configs.enabled_modules %}
                    <div class="row">
                        {% for module, enabled in tenant_configs.enabled_modules.items %}
                            {% if enabled %}
                                <div class="col-6 mb-2">
                                    <span class="badge bg-success me-1">
                                        <i class="fas fa-check me-1"></i>
                                        {{ module|capfirst }}
                                    </span>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-muted mb-0">Nenhum módulo configurado</p>
                {% endif %}
            </div>
            <div class="card-footer bg-light">
                <button class="btn btn-outline-info btn-sm">
                    <i class="fas fa-cog me-1"></i>
                    Configurar Módulos
                </button>
            </div>
        </div>
    </div>
    
    <!-- Configurações de Personalização -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="fas fa-palette me-2"></i>
                    Personalização Visual
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <strong>Logo da Empresa</strong>
                            <br><small class="text-muted">Personalizar logotipo</small>
                        </div>
                        <button class="btn btn-outline-success btn-sm">
                            <i class="fas fa-upload me-1"></i>
                            Upload
                        </button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <strong>Cores do Tema</strong>
                            <br><small class="text-muted">Esquema de cores personalizado</small>
                        </div>
                        <button class="btn btn-outline-success btn-sm">
                            <i class="fas fa-color-palette me-1"></i>
                            Escolher
                        </button>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Tema Escuro</strong>
                        <br><small class="text-muted">Ativar modo escuro</small>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="darkMode">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Configurações de Segurança -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">
                    <i class="fas fa-shield-alt me-2"></i>
                    Segurança da Empresa
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <strong>Autenticação 2FA</strong>
                            <br><small class="text-muted">Exigir para todos os usuários</small>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="force2FA">
                        </div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <strong>Backup Automático</strong>
                            <br><small class="text-muted">Backup diário dos dados</small>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="autoBackup" checked>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Auditoria de Logs</strong>
                        <br><small class="text-muted">Registrar todas as ações</small>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="auditLogs" checked>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block home_recent %}
<div class="row mb-4" data-aos="fade-up" data-aos-delay="500">
    <div class="col-12">
        <h2 class="section-title">
            <i class="fas fa-tools me-2"></i>
            Ações Rápidas
        </h2>
    </div>
</div>

<div class="row" data-aos="fade-up" data-aos-delay="600">
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #0d6efd;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-primary bg-opacity-10 text-primary mx-auto">
                    <i class="fas fa-users-cog"></i>
                </div>
                <h6 class="fw-semibold mb-2">Usuários</h6>
                <p class="text-muted small mb-3">Gerenciar usuários da empresa</p>
                <a href="{% url 'user_management:dashboard' %}" class="action-btn btn btn-outline-primary btn-sm">
                    <i class="fas fa-users me-1"></i>
                    Gerenciar
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #198754;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-success bg-opacity-10 text-success mx-auto">
                    <i class="fas fa-database"></i>
                </div>
                <h6 class="fw-semibold mb-2">Backup</h6>
                <p class="text-muted small mb-3">Backup dos dados da empresa</p>
                <button class="action-btn btn btn-outline-success btn-sm">
                    <i class="fas fa-save me-1"></i>
                    Executar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #dc3545;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-danger bg-opacity-10 text-danger mx-auto">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h6 class="fw-semibold mb-2">Relatórios</h6>
                <p class="text-muted small mb-3">Relatórios da empresa</p>
                <button class="action-btn btn btn-outline-danger btn-sm">
                    <i class="fas fa-chart-bar me-1"></i>
                    Visualizar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #6f42c1;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-purple bg-opacity-10 text-purple mx-auto">
                    <i class="fas fa-cogs"></i>
                </div>
                <h6 class="fw-semibold mb-2">Módulos</h6>
                <p class="text-muted small mb-3">Configurar módulos ativos</p>
                <button class="action-btn btn btn-outline-purple btn-sm">
                    <i class="fas fa-puzzle-piece me-1"></i>
                    Configurar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #fd7e14;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-warning bg-opacity-10 text-warning mx-auto">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h6 class="fw-semibold mb-2">Segurança</h6>
                <p class="text-muted small mb-3">Configurações de segurança</p>
                <button class="action-btn btn btn-outline-warning btn-sm">
                    <i class="fas fa-lock me-1"></i>
                    Configurar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #20c997;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-info bg-opacity-10 text-info mx-auto">
                    <i class="fas fa-palette"></i>
                </div>
                <h6 class="fw-semibold mb-2">Personalização</h6>
                <p class="text-muted small mb-3">Customizar aparência</p>
                <button class="action-btn btn btn-outline-info btn-sm">
                    <i class="fas fa-paint-brush me-1"></i>
                    Personalizar
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block home_extra_css %}
<style>
.bg-purple {
    background-color: #6f42c1 !important;
}
.text-purple {
    color: #6f42c1 !important;
}
.btn-outline-purple {
    color: #6f42c1;
    border-color: #6f42c1;
}
.btn-outline-purple:hover {
    color: white;
    background-color: #6f42c1;
    border-color: #6f42c1;
}

.form-check-input:checked {
    background-color: #198754;
    border-color: #198754;
}
</style>
{% endblock %}
