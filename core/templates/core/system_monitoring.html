{% extends "pandora_ultra_modern_base.html" %}
{% load static %}
{% load humanize %} {% block title %}Monitoramento do Sistema - Pandora ERP{% endblock %} {% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.min.css" rel="stylesheet"><style> .monitoring-header { background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%); color: white; border-radius: 20px; padding: 2.5rem; margin-bottom: 2rem; position: relative; overflow: hidden; } .monitoring-header::before { content: ''; position: absolute; top: -30%; right: -15%; width: 300px; height: 300px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; animation: rotate 20s linear infinite; } .monitoring-header::after { content: ''; position: absolute; bottom: -20%; left: -10%; width: 200px; height: 200px; background: rgba(255, 255, 255, 0.05); border-radius: 50%; animation: float 6s ease-in-out infinite; } .system-status-card { background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.4s ease; position: relative; overflow: hidden; height: 100%; } .system-status-card:hover { transform: translateY(-8px); box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15); } .system-status-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--status-color, #10b981); } .status-indicator { width: 16px; height: 16px; border-radius: 50%; display: inline-block; margin-right: 0.75rem; animation: pulse 2s infinite; } .status-online { background: #10b981; } .status-warning { background: #f59e0b; } .status-error { background: #ef4444; } .status-offline { background: #6b7280; } .metric-display { font-size: 2.5rem; font-weight: 800; color: #1a202c; margin-bottom: 0.5rem; line-height: 1; } .metric-label { font-size: 0.875rem; color: #64748b; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 1rem; } .metric-trend { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; font-weight: 600; } .metric-trend.up { color: #10b981; } .metric-trend.down { color: #ef4444; } .metric-trend.stable { color: #6b7280; } .resource-bar { background: #f1f5f9; border-radius: 8px; height: 8px; overflow: hidden; margin: 0.5rem 0; } .resource-bar-fill { height: 100%; transition: width 0.5s ease; border-radius: 8px; } .resource-low { background: #10b981; } .resource-medium { background: #f59e0b; } .resource-high { background: #ef4444; } .service-item { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 1rem; margin-bottom: 0.75rem; transition: all 0.3s ease; } .service-item:hover { background: white; border-color: #cbd5e1; transform: translateX(4px); } .service-name { font-weight: 600; color: #1a202c; margin-bottom: 0.25rem; } .service-details { font-size: 0.875rem; color: #64748b; display: flex; justify-content: space-between; align-items: center; } .log-viewer { background: #1a202c; border-radius: 16px; padding: 1.5rem; font-family: 'Courier New', monospace; font-size: 0.875rem; line-height: 1.6; color: #e2e8f0; max-height: 400px; overflow-y: auto; position: relative; } .log-viewer::-webkit-scrollbar { width: 8px; } .log-viewer::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); border-radius: 4px; } .log-viewer::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.3); border-radius: 4px; } .log-line { margin-bottom: 0.25rem; padding: 0.25rem 0; border-left: 3px solid transparent; padding-left: 0.75rem; } .log-line.info { border-left-color: #3b82f6; } .log-line.warning { border-left-color: #f59e0b; } .log-line.error { border-left-color: #ef4444; } .log-line.success { border-left-color: #10b981; } .log-controls { position: absolute; top: 1rem; right: 1rem; display: flex; gap: 0.5rem; } .log-control-btn { background: rgba(255, 255, 255, 0.1); border: none; color: white; padding: 0.375rem 0.75rem; border-radius: 6px; font-size: 0.75rem; cursor: pointer; transition: all 0.3s ease; } .log-control-btn:hover { background: rgba(255, 255, 255, 0.2); } .alert-item { background: white; border-radius: 12px; padding: 1rem; margin-bottom: 0.75rem; border-left: 4px solid var(--alert-color); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); transition: all 0.3s ease; } .alert-item:hover { transform: translateX(4px); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1); } .alert-critical { --alert-color: #dc2626; } .alert-warning { --alert-color: #d97706; } .alert-info { --alert-color: #2563eb; } .alert-header { display: flex; justify-content: between; align-items: center; margin-bottom: 0.5rem; } .alert-title { font-weight: 600; color: #1a202c; margin: 0; } .alert-time { font-size: 0.75rem; color: #6b7280; } .realtime-data { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; } .realtime-metric { background: white; border-radius: 16px; padding: 1.5rem; text-align: center; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); transition: all 0.3s ease; } .realtime-metric:hover { transform: translateY(-4px); box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12); } .chart-container { background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); margin-bottom: 2rem; position: relative; } .chart-controls { position: absolute; top: 2rem; right: 2rem; display: flex; gap: 0.5rem; } .chart-control-btn { background: #f8fafc; border: 1px solid #e2e8f0; color: #64748b; padding: 0.375rem 0.75rem; border-radius: 6px; font-size: 0.75rem; cursor: pointer; transition: all 0.3s ease; } .chart-control-btn:hover, .chart-control-btn.active { background: #667eea; color: white; border-color: #667eea; } @keyframes rotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } } @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } } .auto-refresh-indicator { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.375rem 0.75rem; background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 50px; font-size: 0.75rem; font-weight: 600; color: #059669; text-transform: uppercase; letter-spacing: 0.5px; } .refresh-dot { width: 6px; height: 6px; border-radius: 50%; background: #10b981; animation: pulse 2s infinite; }
</style>
{% endblock %} {% block content %}
<div class="container-fluid py-4"><!-- Breadcrumb --><div class="row mb-4"><div class="col-12"><nav aria-label="breadcrumb"><ol class="breadcrumb bg-white shadow-sm rounded-3 px-3 py-2 mb-0"><li class="breadcrumb-item"><a href="{% url 'dashboard' %}" class="text-decoration-none"><i class="fas fa-home"></i> Início </a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-desktop"></i> Monitoramento do Sistema </li></ol></nav></div></div><!-- Header --><div class="monitoring-header" data-aos="fade-down"><div class="row align-items-center"><div class="col-lg-8"><h1 class="display-6 fw-bold mb-2"><i class="fas fa-desktop me-3"></i> Monitoramento do Sistema </h1><p class="fs-5 mb-0 opacity-90"> Acompanhe o desempenho e a saúde do sistema em tempo real </p><div class="auto-refresh-indicator mt-3"><div class="refresh-dot"></div> Atualização Automática Ativa </div></div><div class="col-lg-4 text-end"><div class="d-flex gap-3 justify-content-end flex-wrap"><button type="button" class="btn btn-light btn-lg rounded-pill" onclick="toggleAutoRefresh()"><i class="fas fa-sync-alt me-2"></i><span id="autoRefreshText">Auto-Refresh</span></button><button type="button" class="btn btn-warning btn-lg rounded-pill" onclick="exportSystemReport()"><i class="fas fa-download me-2"></i> Exportar </button></div></div></div></div><!-- System Status Overview --><div class="row g-4 mb-4" data-aos="fade-up"><div class="col-lg-3 col-md-6"><div class="system-status-card"><div class="d-flex align-items-center mb-3"><span class="status-indicator status-online"></span><h6 class="fw-bold mb-0">Sistema Principal</h6></div><div class="metric-display">99.9%</div><div class="metric-label">Uptime</div><div class="metric-trend up"><i class="fas fa-arrow-up"></i> +0.1% última hora </div></div></div><div class="col-lg-3 col-md-6"><div class="system-status-card"><div class="d-flex align-items-center mb-3"><span class="status-indicator status-online"></span><h6 class="fw-bold mb-0">Banco de Dados</h6></div><div class="metric-display">2.4ms</div><div class="metric-label">Latência Média</div><div class="metric-trend stable"><i class="fas fa-minus"></i> Estável </div></div></div><div class="col-lg-3 col-md-6"><div class="system-status-card"><div class="d-flex align-items-center mb-3"><span class="status-indicator status-warning"></span><h6 class="fw-bold mb-0">Cache Redis</h6></div><div class="metric-display">85%</div><div class="metric-label">Uso de Memória</div><div class="metric-trend up"><i class="fas fa-arrow-up"></i> +5% última hora </div></div></div><div class="col-lg-3 col-md-6"><div class="system-status-card"><div class="d-flex align-items-center mb-3"><span class="status-indicator status-online"></span><h6 class="fw-bold mb-0">WebSocket</h6></div><div class="metric-display">{{ active_connections|default:0 }}</div><div class="metric-label">Conexões Ativas</div><div class="metric-trend up"><i class="fas fa-arrow-up"></i> +12 última hora </div></div></div></div><!-- Real-time Metrics --><div class="realtime-data" data-aos="fade-up" data-aos-delay="100"><div class="realtime-metric"><h6 class="fw-bold text-primary mb-2">CPU</h6><div class="metric-display" id="cpuUsage">45%</div><div class="resource-bar"><div class="resource-bar-fill resource-medium" ></div></div></div><div class="realtime-metric"><h6 class="fw-bold text-success mb-2">Memória</h6><div class="metric-display" id="memoryUsage">62%</div><div class="resource-bar"><div class="resource-bar-fill resource-medium" ></div></div></div><div class="realtime-metric"><h6 class="fw-bold text-info mb-2">Disco</h6><div class="metric-display" id="diskUsage">78%</div><div class="resource-bar"><div class="resource-bar-fill resource-high" ></div></div></div><div class="realtime-metric"><h6 class="fw-bold text-warning mb-2">Rede</h6><div class="metric-display" id="networkUsage">23%</div><div class="resource-bar"><div class="resource-bar-fill resource-low" ></div></div></div></div><!-- Messages --> {% include "partials/messages.html" %} <!-- Charts Row --><div class="row g-4 mb-4"><!-- Performance Chart --><div class="col-lg-8"><div class="chart-container" data-aos="fade-up" data-aos-delay="200"><div class="chart-controls"><button class="chart-control-btn active" onclick="changeTimeRange('1h')">1h</button><button class="chart-control-btn" onclick="changeTimeRange('6h')">6h</button><button class="chart-control-btn" onclick="changeTimeRange('24h')">24h</button><button class="chart-control-btn" onclick="changeTimeRange('7d')">7d</button></div><h5 class="fw-bold mb-3"><i class="fas fa-chart-line me-2 text-primary"></i> Performance do Sistema </h5><canvas id="performanceChart" height="80"></canvas></div></div><!-- Resource Usage --><div class="col-lg-4"><div class="chart-container" data-aos="fade-up" data-aos-delay="300"><h5 class="fw-bold mb-3"><i class="fas fa-chart-pie me-2 text-primary"></i> Uso de Recursos </h5><canvas id="resourceChart" height="160"></canvas></div></div></div><!-- Services and Alerts Row --><div class="row g-4 mb-4"><!-- Services Status --><div class="col-lg-6"><div class="chart-container" data-aos="fade-up" data-aos-delay="400"><h5 class="fw-bold mb-3"><i class="fas fa-cogs me-2 text-primary"></i> Status dos Serviços </h5><div class="service-item"><div class="service-name"><span class="status-indicator status-online"></span> Django Application </div><div class="service-details"><span>Porta 8000</span><span class="badge bg-success">Online</span></div></div><div class="service-item"><div class="service-name"><span class="status-indicator status-online"></span> PostgreSQL Database </div><div class="service-details"><span>Porta 5432</span><span class="badge bg-success">Online</span></div></div><div class="service-item"><div class="service-name"><span class="status-indicator status-warning"></span> Redis Cache </div><div class="service-details"><span>Porta 6379</span><span class="badge bg-warning">Aviso</span></div></div><div class="service-item"><div class="service-name"><span class="status-indicator status-online"></span> Nginx Proxy </div><div class="service-details"><span>Porta 80/443</span><span class="badge bg-success">Online</span></div></div><div class="service-item"><div class="service-name"><span class="status-indicator status-online"></span> Celery Workers </div><div class="service-details"><span>4 workers ativos</span><span class="badge bg-success">Online</span></div></div></div></div><!-- System Alerts --><div class="col-lg-6"><div class="chart-container" data-aos="fade-up" data-aos-delay="500"><h5 class="fw-bold mb-3"><i class="fas fa-exclamation-triangle me-2 text-primary"></i> Alertas do Sistema </h5><div class="alert-item alert-warning"><div class="alert-header"><h6 class="alert-title">Uso de Memória Alto</h6><span class="alert-time">5 min atrás</span></div><p class="text-muted mb-0">Redis está usando 85% da memória disponível</p></div><div class="alert-item alert-info"><div class="alert-header"><h6 class="alert-title">Backup Concluído</h6><span class="alert-time">1 hora atrás</span></div><p class="text-muted mb-0">Backup automático do banco de dados concluído com sucesso</p></div><div class="alert-item alert-info"><div class="alert-header"><h6 class="alert-title">Atualização Disponível</h6><span class="alert-time">3 horas atrás</span></div><p class="text-muted mb-0">Nova versão do sistema disponível para instalação</p></div><div class="alert-item alert-info"><div class="alert-header"><h6 class="alert-title">Cache Limpo</h6><span class="alert-time">6 horas atrás</span></div><p class="text-muted mb-0">Cache do sistema foi limpo automaticamente</p></div></div></div></div><!-- System Logs --><div class="row"><div class="col-12"><div class="chart-container" data-aos="fade-up" data-aos-delay="600"><h5 class="fw-bold mb-3"><i class="fas fa-terminal me-2 text-primary"></i> Logs do Sistema em Tempo Real </h5><div class="log-viewer" id="logViewer"><div class="log-controls"><button class="log-control-btn" onclick="pauseLogs()"><i class="fas fa-pause"></i> Pausar </button><button class="log-control-btn" onclick="clearLogs()"><i class="fas fa-trash"></i> Limpar </button><button class="log-control-btn" onclick="downloadLogs()"><i class="fas fa-download"></i> Download </button></div><div class="log-line info">[2024-01-20 14:30:15] INFO: Sistema iniciado com sucesso</div><div class="log-line info">[2024-01-20 14:30:16] INFO: Conectado ao banco de dados PostgreSQL</div><div class="log-line info">[2024-01-20 14:30:17] INFO: Cache Redis inicializado</div><div class="log-line success">[2024-01-20 14:30:18] SUCCESS: Todos os serviços online</div><div class="log-line info">[2024-01-20 14:32:45] INFO: Usuário admin@pandora.com realizou login</div><div class="log-line warning">[2024-01-20 14:35:12] WARNING: Uso de memória acima de 80%</div><div class="log-line info">[2024-01-20 14:38:33] INFO: Backup automático iniciado</div><div class="log-line success">[2024-01-20 14:42:15] SUCCESS: Backup concluído com sucesso</div><div class="log-line info">[2024-01-20 14:45:22] INFO: Celery worker processou 25 tarefas</div><div class="log-line info">[2024-01-20 14:48:10] INFO: Sistema processou 150 requisições/min</div></div></div></div></div></div>
{% endblock %} {% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.min.js"></script><script>
let performanceChart;
let resourceChart;
let autoRefreshInterval;
let logsPaused = false; document.addEventListener('DOMContentLoaded', function() { // Initialize charts initializePerformanceChart(); initializeResourceChart(); // Start auto-refresh startAutoRefresh(); // Start real-time updates startRealtimeUpdates(); // Start log streaming startLogStreaming();
}); function initializePerformanceChart() { const ctx = document.getElementById('performanceChart').getContext('2d'); const chartData = { labels: generateTimeLabels(60), // Last 60 minutes datasets: [ { label: 'CPU (%)', data: generateRandomData(60, 20, 80), borderColor: '#3b82f6', backgroundColor: 'rgba(59, 130, 246, 0.1)', borderWidth: 2, fill: true, tension: 0.4 }, { label: 'Memória (%)', data: generateRandomData(60, 40, 90), borderColor: '#10b981', backgroundColor: 'rgba(16, 185, 129, 0.1)', borderWidth: 2, fill: true, tension: 0.4 }, { label: 'Disco (%)', data: generateRandomData(60, 60, 85), borderColor: '#f59e0b', backgroundColor: 'rgba(245, 158, 11, 0.1)', borderWidth: 2, fill: true, tension: 0.4 } ] }; performanceChart = new Chart(ctx, { type: 'line', data: chartData, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top', labels: { font: { family: 'Inter', size: 12, weight: 500 }, usePointStyle: true, padding: 20 } } }, scales: { y: { beginAtZero: true, max: 100, grid: { color: 'rgba(0, 0, 0, 0.05)' }, ticks: { callback: function(value) { return value + '%'; }, font: { family: 'Inter', size: 11 } } }, x: { grid: { display: false }, ticks: { font: { family: 'Inter', size: 11 } } } }, elements: { point: { radius: 0, hoverRadius: 6 } } } });
} function initializeResourceChart() { const ctx = document.getElementById('resourceChart').getContext('2d'); const chartData = { labels: ['CPU', 'Memória', 'Disco', 'Rede'], datasets: [{ data: [45, 62, 78, 23], backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6'], borderWidth: 0, hoverOffset: 10 }] }; resourceChart = new Chart(ctx, { type: 'doughnut', data: chartData, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { font: { family: 'Inter', size: 11, weight: 500 }, usePointStyle: true, padding: 15 } } }, cutout: '60%' } });
} function generateTimeLabels(count) { const labels = []; const now = new Date(); for (let i = count - 1; i >= 0; i--) { const time = new Date(now.getTime() - (i * 60000)); labels.push(time.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })); } return labels;
} function generateRandomData(count, min, max) { const data = []; for (let i = 0; i < count; i++) { data.push(Math.floor(Math.random() * (max - min + 1)) + min); } return data;
} function startAutoRefresh() { autoRefreshInterval = setInterval(() => { updateSystemMetrics(); updateCharts(); }, 30000); // Refresh every 30 seconds
} function toggleAutoRefresh() { const textElement = document.getElementById('autoRefreshText'); if (autoRefreshInterval) { clearInterval(autoRefreshInterval); autoRefreshInterval = null; textElement.textContent = 'Iniciar Auto-Refresh'; showNotification('Auto-refresh desativado', 'info'); } else { startAutoRefresh(); textElement.textContent = 'Parar Auto-Refresh'; showNotification('Auto-refresh ativado', 'success'); }
} function startRealtimeUpdates() { setInterval(() => { updateRealtimeMetrics(); }, 5000); // Update every 5 seconds
} function updateRealtimeMetrics() { // CPU const cpuUsage = Math.floor(Math.random() * 40) + 30; document.getElementById('cpuUsage').textContent = cpuUsage + '%'; updateResourceBar('cpu', cpuUsage); // Memory const memoryUsage = Math.floor(Math.random() * 30) + 50; document.getElementById('memoryUsage').textContent = memoryUsage + '%'; updateResourceBar('memory', memoryUsage); // Disk const diskUsage = Math.floor(Math.random() * 20) + 70; document.getElementById('diskUsage').textContent = diskUsage + '%'; updateResourceBar('disk', diskUsage); // Network const networkUsage = Math.floor(Math.random() * 50) + 10; document.getElementById('networkUsage').textContent = networkUsage + '%'; updateResourceBar('network', networkUsage); // Update doughnut chart resourceChart.data.datasets[0].data = [cpuUsage, memoryUsage, diskUsage, networkUsage]; resourceChart.update('none');
} function updateResourceBar(type, value) { const bars = document.querySelectorAll('.resource-bar-fill'); let barIndex; switch(type) { case 'cpu': barIndex = 0; break; case 'memory': barIndex = 1; break; case 'disk': barIndex = 2; break; case 'network': barIndex = 3; break; } const bar = bars[barIndex]; bar.style.width = value + '%'; // Update color based on usage bar.className = 'resource-bar-fill ' + (value < 50 ? 'resource-low' : value < 80 ? 'resource-medium' : 'resource-high');
} function updateSystemMetrics() { // Mock implementation - replace with actual data fetching console.log('Updating system metrics...');
} function updateCharts() { // Add new data point to performance chart const now = new Date(); const timeLabel = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }); // Remove oldest data point and add new one performanceChart.data.labels.shift(); performanceChart.data.labels.push(timeLabel); performanceChart.data.datasets.forEach(dataset => { dataset.data.shift(); dataset.data.push(Math.floor(Math.random() * 60) + 20); }); performanceChart.update('none');
} function changeTimeRange(range) { // Update active button document.querySelectorAll('.chart-control-btn').forEach(btn => { btn.classList.remove('active'); }); event.target.classList.add('active'); // Mock implementation - replace with actual data fetching console.log('Changing time range to:', range); showNotification(`Exibindo dados dos últimos ${range}`, 'info');
} function startLogStreaming() { setInterval(() => { if (!logsPaused) { addNewLogEntry(); } }, 3000); // Add new log every 3 seconds
} function addNewLogEntry() { const logViewer = document.getElementById('logViewer'); const now = new Date(); const timestamp = now.toISOString().slice(0, 19).replace('T', ' '); const logTypes = ['info', 'success', 'warning']; const logMessages = [ 'Processando requisição HTTP', 'Cache atualizado com sucesso', 'Novo usuário conectado', 'Backup automático em andamento', 'Tarefa Celery processada', 'Limpeza de sessões expiradas', 'Compressão de logs antiga' ]; const randomType = logTypes[Math.floor(Math.random() * logTypes.length)]; const randomMessage = logMessages[Math.floor(Math.random() * logMessages.length)]; const logLine = document.createElement('div'); logLine.className = `log-line ${randomType}`; logLine.textContent = `[${timestamp}] ${randomType.toUpperCase()}: ${randomMessage}`; logViewer.appendChild(logLine); // Keep only last 50 log entries const lines = logViewer.querySelectorAll('.log-line'); if (lines.length > 50) { lines[0].remove(); } // Auto-scroll to bottom logViewer.scrollTop = logViewer.scrollHeight;
} function pauseLogs() { logsPaused = !logsPaused; const button = event.target.closest('button'); if (logsPaused) { button.innerHTML = '<i class="fas fa-play"></i> Retomar'; showNotification('Logs pausados', 'info'); } else { button.innerHTML = '<i class="fas fa-pause"></i> Pausar'; showNotification('Logs retomados', 'success'); }
} function clearLogs() { if (confirm('Limpar todos os logs exibidos?')) { const logViewer = document.getElementById('logViewer'); const controls = logViewer.querySelector('.log-controls'); logViewer.innerHTML = ''; logViewer.appendChild(controls); showNotification('Logs limpos', 'success'); }
} function downloadLogs() { const logViewer = document.getElementById('logViewer'); const logs = Array.from(logViewer.querySelectorAll('.log-line')) .map(line => line.textContent) .join('\n'); const blob = new Blob([logs], { type: 'text/plain' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = `system_logs_${new Date().toISOString().split('T')[0]}.txt`; a.click(); URL.revokeObjectURL(url); showNotification('Logs baixados com sucesso!', 'success');
} function exportSystemReport() { showNotification('Gerando relatório do sistema...', 'info'); setTimeout(() => { const reportData = { timestamp: new Date().toISOString(), uptime: '99.9%', cpu_usage: document.getElementById('cpuUsage').textContent, memory_usage: document.getElementById('memoryUsage').textContent, disk_usage: document.getElementById('diskUsage').textContent, network_usage: document.getElementById('networkUsage').textContent }; const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = `system_report_${new Date().toISOString().split('T')[0]}.json`; a.click(); URL.revokeObjectURL(url); showNotification('Relatório exportado com sucesso!', 'success'); }, 2000);
} function showNotification(message, type = 'info') { const notification = document.createElement('div'); notification.className = `alert alert-${type} alert-dismissible fade show position-fixed`; notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;'; notification.innerHTML = ` ${message} <button type="button" class="btn-close" data-bs-dismiss="alert"></button> `; document.body.appendChild(notification); setTimeout(() => { if (notification.parentNode) { notification.remove(); } }, 5000);
}
</script>
{% endblock %}
