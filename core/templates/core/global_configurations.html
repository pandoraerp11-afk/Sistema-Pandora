{% extends "pandora_home_ultra_modern.html" %}
{% load static %}
{% load i18n %}

{% block home_icon %}<i class="fas fa-globe me-2 text-primary"></i>{% endblock %}
{% block home_title %}Configurações Globais{% endblock %}
{% block home_subtitle %}Parâmetros e configurações globais da plataforma Pandora ERP{% endblock %}

{% block home_stats %}
<div class="row mb-4" data-aos="fade-up" data-aos-delay="100">
    <div class="col-12">
        <h2 class="section-title">
            <i class="fas fa-chart-bar me-2"></i>
            Métricas Globais do Sistema
        </h2>
    </div>
</div>

<div class="row mb-4" data-aos="fade-up" data-aos-delay="200">
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card primary h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-primary bg-opacity-10 text-primary mx-auto">
                    <i class="fas fa-building"></i>
                </div>
                <h3 class="fw-bold mb-1">{{ global_metrics.total_tenants }}</h3>
                <p class="text-muted mb-0">Empresas Cadastradas</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card success h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-success bg-opacity-10 text-success mx-auto">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 class="fw-bold mb-1">{{ global_metrics.active_tenants }}</h3>
                <p class="text-muted mb-0">Empresas Ativas</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card info h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-info bg-opacity-10 text-info mx-auto">
                    <i class="fas fa-users"></i>
                </div>
                <h3 class="fw-bold mb-1">{{ global_metrics.total_users }}</h3>
                <p class="text-muted mb-0">Usuários Totais</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6 mb-3">
        <div class="stats-card warning h-100">
            <div class="card-body text-center">
                <div class="stats-icon bg-warning bg-opacity-10 text-warning mx-auto">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h3 class="fw-bold mb-1">{{ global_metrics.total_superusers }}</h3>
                <p class="text-muted mb-0">Super Admins</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block home_actions %}
<div class="row mb-4" data-aos="fade-up" data-aos-delay="300">
    <div class="col-12">
        <h2 class="section-title">
            <i class="fas fa-cogs me-2"></i>
            Configurações do Sistema
        </h2>
    </div>
</div>

<div class="row mb-4" data-aos="fade-up" data-aos-delay="400">
    <!-- Configurações Gerais -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-sliders-h me-2"></i>
                    Configurações Gerais
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <strong>Modo Debug</strong>
                                <br><small class="text-muted">Status do modo de desenvolvimento</small>
                            </div>
                            <span class="badge bg-{{ system_configs.debug_mode|yesno:'danger,success' }}">
                                {{ system_configs.debug_mode|yesno:'Ativo,Inativo' }}
                            </span>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <strong>Modo Manutenção</strong>
                                <br><small class="text-muted">Sistema em manutenção</small>
                            </div>
                            <span class="badge bg-{{ system_configs.maintenance_mode|yesno:'warning,success' }}">
                                {{ system_configs.maintenance_mode|yesno:'Ativo,Inativo' }}
                            </span>
                        </div>
                    </div>
                    
                    <div class="col-12 mb-3">
                        <div>
                            <strong>Fuso Horário</strong>
                            <br><small class="text-muted">{{ system_configs.time_zone }}</small>
                        </div>
                    </div>
                    
                    <div class="col-12 mb-3">
                        <div>
                            <strong>Idioma Padrão</strong>
                            <br><small class="text-muted">{{ system_configs.language_code }}</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Configurações de Email -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="fas fa-envelope me-2"></i>
                    Configurações de Email
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Backend de Email</strong>
                    <br><small class="text-muted">{{ system_configs.email_backend|default:"Não configurado" }}</small>
                </div>
                
                <div class="mb-3">
                    <strong>Email Padrão</strong>
                    <br><small class="text-muted">{{ system_configs.default_from_email|default:"Não configurado" }}</small>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Status</strong>
                        <br><small class="text-muted">Configuração de envio</small>
                    </div>
                    <span class="badge bg-{{ system_configs.email_backend|yesno:'success,warning' }}">
                        {{ system_configs.email_backend|yesno:'Configurado,Pendente' }}
                    </span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Configurações de Banco -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="fas fa-database me-2"></i>
                    Configurações de Banco
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Engine do Banco</strong>
                    <br><small class="text-muted">{{ system_configs.database_engine }}</small>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Status</strong>
                        <br><small class="text-muted">Conexão ativa</small>
                    </div>
                    <span class="badge bg-success">
                        <i class="fas fa-check me-1"></i>
                        Conectado
                    </span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Segurança -->
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">
                    <i class="fas fa-shield-alt me-2"></i>
                    Configurações de Segurança
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Hosts Permitidos</strong>
                    <br><small class="text-muted">
                        {% for host in system_configs.allowed_hosts %}
                            <span class="badge bg-light text-dark me-1">{{ host }}</span>
                        {% empty %}
                            Todos os hosts permitidos
                        {% endfor %}
                    </small>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Super Admins</strong>
                        <br><small class="text-muted">Usuários com acesso total</small>
                    </div>
                    <span class="badge bg-warning">
                        {{ global_metrics.total_superusers }}
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block home_recent %}
<div class="row mb-4" data-aos="fade-up" data-aos-delay="500">
    <div class="col-12">
        <h2 class="section-title">
            <i class="fas fa-tools me-2"></i>
            Ações Administrativas
        </h2>
    </div>
</div>

<div class="row" data-aos="fade-up" data-aos-delay="600">
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #dc3545;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-danger bg-opacity-10 text-danger mx-auto">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h6 class="fw-semibold mb-2">Modo Manutenção</h6>
                <p class="text-muted small mb-3">Ativar/desativar modo de manutenção do sistema</p>
                <button class="action-btn btn btn-outline-danger btn-sm">
                    <i class="fas fa-toggle-off me-1"></i>
                    Configurar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #198754;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-success bg-opacity-10 text-success mx-auto">
                    <i class="fas fa-database"></i>
                </div>
                <h6 class="fw-semibold mb-2">Backup Global</h6>
                <p class="text-muted small mb-3">Realizar backup completo do sistema</p>
                <button class="action-btn btn btn-outline-success btn-sm">
                    <i class="fas fa-save me-1"></i>
                    Executar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #0d6efd;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-primary bg-opacity-10 text-primary mx-auto">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h6 class="fw-semibold mb-2">Monitoramento</h6>
                <p class="text-muted small mb-3">Visualizar logs e métricas do sistema</p>
                <button class="action-btn btn btn-outline-primary btn-sm">
                    <i class="fas fa-eye me-1"></i>
                    Visualizar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #6f42c1;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-purple bg-opacity-10 text-purple mx-auto">
                    <i class="fas fa-users-cog"></i>
                </div>
                <h6 class="fw-semibold mb-2">Gestão de Tenants</h6>
                <p class="text-muted small mb-3">Gerenciar empresas cadastradas</p>
                <a href="{% url 'core:tenant_list' %}" class="action-btn btn btn-outline-purple btn-sm">
                    <i class="fas fa-building me-1"></i>
                    Acessar
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #fd7e14;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-warning bg-opacity-10 text-warning mx-auto">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h6 class="fw-semibold mb-2">Super Admins</h6>
                <p class="text-muted small mb-3">Gerenciar usuários administradores</p>
                <button class="action-btn btn btn-outline-warning btn-sm">
                    <i class="fas fa-crown me-1"></i>
                    Gerenciar
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-3">
        <div class="quick-action-card h-100" style="--accent-color: #20c997;">
            <div class="card-body text-center">
                <div class="quick-action-icon bg-info bg-opacity-10 text-info mx-auto">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h6 class="fw-semibold mb-2">Relatórios</h6>
                <p class="text-muted small mb-3">Relatórios globais do sistema</p>
                <a href="{% url 'core:reports' %}" class="action-btn btn btn-outline-info btn-sm">
                    <i class="fas fa-chart-bar me-1"></i>
                    Visualizar
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block home_extra_css %}
<style>
.bg-purple {
    background-color: #6f42c1 !important;
}
.text-purple {
    color: #6f42c1 !important;
}
.btn-outline-purple {
    color: #6f42c1;
    border-color: #6f42c1;
}
.btn-outline-purple:hover {
    color: white;
    background-color: #6f42c1;
    border-color: #6f42c1;
}
</style>
{% endblock %}
