# Copie este arquivo para env.yaml e preencha com seus segredos reais.
# NUNCA faça commit do env.yaml.

env_variables:
  DJANGO_SECRET_KEY: "coloque-sua-django-secret-key-aqui"
  DJANGO_DEBUG: "False"
  # URL completa do Postgres (Cloud SQL ou outro provedor). Exemplo:
  # postgres://usuario:senha@host:5432/nomedobanco
  DATABASE_URL: "postgres://usuario:senha@host:5432/nomedobanco"
  # OU (App Engine Standard via Unix Socket Cloud SQL):
  # DATABASE_URL: "postgres://pandora_user:senha_urlencode@/pandora_app?host=/cloudsql/PROJETO:REGIAO:INSTANCIA"
  # Observação: se a senha tiver @ substitua por %40, ! por %21, etc.
  # Force HTTPS (ajustar se ambiente gerenciado já lida com isso)
  DJANGO_FORCE_SSL: "True"
  # Ajustar se quiser permitir SQLite temporariamente
  # ALLOW_SQLITE_PROD: "1"
  # Ajustar versão custom se quiser
  PANDORA_VERSION: "0.1.0"
  # Configurações de e-mail (se usar reset de senha)
  EMAIL_BACKEND: "django.core.mail.backends.smtp.EmailBackend"
  EMAIL_HOST: "smtp.seuprovedor.com"
  EMAIL_PORT: "587"
  EMAIL_HOST_USER: "usuario"
  EMAIL_HOST_PASSWORD: "senha"
  EMAIL_USE_TLS: "True"
  DEFAULT_FROM_EMAIL: "noreply@seudominio.com"
  # Redis opcional (se usar cache / channels / celery):
  # REDIS_URL: "redis://:senha@host:6379/0"

  # ================================
  # Retry de Migrações (entrypoint.sh)
  # ================================
  # Ajuste se quiser mais/menos tentativas na inicialização (App Engine + Cloud SQL)
  # MIGRATION_MAX_RETRIES: "10"            # padrão 10
  # MIGRATION_INITIAL_SLEEP_SECONDS: "3"    # padrão 3
  # MIGRATION_BACKOFF_FACTOR: "1.6"         # padrão 1.6 (limite 45s)

  # ================================
  # Hosts / CSRF dinâmicos (opcionais)
  # ================================
  # Ex: PANDORA_ALLOWED_HOSTS: "app.appspot.com,www.seudominio.com"
  # Ex: PANDORA_CSRF_ORIGINS: "https://app.appspot.com,https://www.seudominio.com"
  # PANDORA_ALLOWED_HOSTS: "app.appspot.com,www.seudominio.com"
  # PANDORA_CSRF_ORIGINS: "https://app.appspot.com,https://www.seudominio.com"

  # ================================
  # DB Dedicado / Usuário Dedicado (Boa Prática Prod)
  # ================================
  # Passos recomendados (Cloud SQL):
  # 1. psql (via proxy) como postgres admin
  #    CREATE DATABASE pandora_app ENCODING 'UTF8' LC_COLLATE='en_US.UTF-8' LC_CTYPE='en_US.UTF-8';
  # 2. CREATE USER pandora_user WITH PASSWORD 'SENHA_FORTE';
  # 3. GRANT ALL PRIVILEGES ON DATABASE pandora_app TO pandora_user;
  # 4. ALTER DATABASE pandora_app OWNER TO pandora_user;
  # 5. Recriar extensões se precisar (ex: CREATE EXTENSION IF NOT EXISTS pg_trgm;)
  # 6. Ajustar DATABASE_URL para usar pandora_user/pandora_app

  # ================================
  # Desativar Channels / WebSockets (App Engine Standard)
  # ================================
  # DISABLE_CHANNELS: "1"

  # ================================
  # Segurança adicional / Cookies / HSTS
  # ================================
  # SECURE_HSTS_SECONDS: "2592000"          # 30 dias
  # SECURE_HSTS_PRELOAD: "True"
  # SESSION_COOKIE_SECURE: "1"               # já forçado se DEBUG=False
  # CSRF_COOKIE_SECURE: "1"

  # ================================
  # Login throttle / 2FA (caso ajuste fino seja necessário)
  # ================================
  # LOGIN_PROGRESSIVE_DELAY_BASE_SECONDS: "1"
  # LOGIN_PROGRESSIVE_DELAY_THRESHOLD: "5"
  # LOGIN_PROGRESSIVE_DELAY_MAX_SECONDS: "12"
  # TWOFA_LOCK_THRESHOLD: "5"
  # TWOFA_LOCK_MINUTES: "5"
  # TWOFA_RATE_LIMIT_ATTEMPTS: "10"
  # TWOFA_RATE_LIMIT_WINDOW_SECONDS: "60"
  # TWOFA_ALERT_THRESHOLDS: "20,50,100"
  # TWOFA_ALERT_EMAIL_COOLDOWN_MINUTES: "30"
  # TWOFA_FERNET_KEYS: "chave1,chave2"      # Rotação de chaves
  # TWOFA_RECOVERY_PEPPER: "pepper-extra"   # Segredo adicional

  # ================================
  # Observabilidade / Erros
  # ================================
  # SENTRY_DSN: "https://public_key@oN.ingest.sentry.io/project_id"

  # ================================
  # Celery / Broker (se usar tasks assíncronas)
  # ================================
  # CELERY_BROKER_URL: "redis://:senha@host:6379/0"
  # CELERY_RESULT_BACKEND: "redis://:senha@host:6379/1"

  # ================================
  # Outros ajustes futuros (placeholders)
  # ================================
  # PANDORA_ALLOWED_FILE_TYPES: "pdf,jpg,png"
  # PANDORA_MAX_UPLOAD_MB: "25"
